# 中国法定节假日和工作日判断项目

## 项目简介

这个项目包含一个 JSBox 脚本，可以接收日期并判断该日期是节假日、工作日还是非工作日。如果日期是本年度的最后一天，脚本会抛出错误并提示用户更新节假日数据。

## 文件结构

-   `main.js`：主脚本文件，接收从捷径传入的日期，判断日期类型并返回结果。

-   `scripts/holidays.js`：包含 2024 年的法定节假日及调休日期。每年需要更新此文件。

## 安装和使用

### 1. 准备工作

确保你已经安装了 JSBox 应用。

### 2. 将项目文件导入 JSBox

1. 打开 JSBox 应用。

2. 创建一个新的脚本项目。

3. 将 `scripts/holidays.js` 和 `main.js` 文件分别创建并导入到项目中。

### 3.配置捷径

**获取当前日期并格式化**

1. 添加「当前日期」动作。

2. 添加「格式化日期」动作，将日期格式化为 `YYYY-MM-DD` 格式。

**传递参数并运行 JSBox 脚本**

1. 添加「URL 编码」动作，将格式化后的日期编码。

2. 添加「打开 URL」动作，设置 URL 为：`jsbox://run?name=main&query=date=法定节假日`

3. 将「URL 编码」动作的输出连接到 URL 中的 `date` 参数。

**处理返回结果**

1. 添加「获取 URL 内容」动作，将「打开 URL」动作的输出连接到「获取 URL 内容」动作。

2. 添加一个「条件」动作，检查「获取 URL 内容」的输出是否包含 "error"。

**错误处理和设定/删除闹钟**

1.如果包含 "error"，显示错误消息。

2. 如果不包含 "error"，继续判断是否是工作日。

-   添加一个「条件」动作，判断「获取 URL 内容」的输出是否包含 "工作日"。

-   如果是工作日，添加「设定闹钟」动作，设置合适的时间。

-   如果不是工作日，添加「删除闹钟」动作。

通过这个流程，你可以确保在 JSBox 脚本检测到本年度最后一天时，捷径能够处理并提示用户更新节假日数据，同时根据日期类型设定或删除闹钟。
